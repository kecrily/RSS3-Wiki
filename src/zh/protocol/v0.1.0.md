# RSS3 v0.1.0

**最新草案：**

- [https://github.com/NaturalSelectionLabs/RSS3](https://github.com/NaturalSelectionLabs/RSS3)

编者：

- DIYgod ([NaturalSelectionLabs](https://github.com/NaturalSelectionLabs))
- Joshua ([NaturalSelectionLabs](https://github.com/NaturalSelectionLabs))
- Atlas ([NaturalSelectionLabs](https://github.com/NaturalSelectionLabs))

**审稿：**

- Zui ([NaturalSelectionLabs](https://github.com/NaturalSelectionLabs))
- Usagi ([NaturalSelectionLabs](https://github.com/NaturalSelectionLabs))

**参与：**

- [GitHub](https://github.com/NaturalSelectionLabs/RSS3)
- [Telegram](https://bit.ly/3e6FZoV)
- [Discord](https://bit.ly/3aSYvPA)
- [Twitter](https://twitter.com/rss3_)

## 1. 摘要

RSS3 取自 RSS 精华，是为 Web 3.0 时代的内容和社交网络而设计的开放协议。

本文档介绍了 RSS3 文件相关接口。

## 2. 文档状态

本提案由 [NaturalSelectionLabs](https://github.com/NaturalSelectionLabs) 孵化。

首选 [GitHub](https://github.com/NaturalSelectionLabs/RSS3) [issues](https://github.com/NaturalSelectionLabs/RSS3/issues) 和 [discussions](https://github.com/NaturalSelectionLabs/RSS3/discussions) 讨论本规范。

## 3. 兼容性

这是预发布版本，不保证与后续版本兼容，但会尽可能维持低破坏性更新。

## 4. 概念

- 角色 - 一个用户，可以是个人，也可以是团体
- 项目 - 一个由角色发布的项目
- 内容 - 一个项目的一种交互性内容
- 链接 - 当前角色与其他角色的关系
- 反向链接 - 其他角色与当前角色的关系

## 5. 接口

### 5.1 TypeScript 接口

```tsx
type RSS3ID = string;
type RSS3ItemID = string;
type RSS3ItemsID = string;
type RSS3ListID = string;
type ThirdPartyAddress = string[];

// Common attributes for each files
interface RSS3Base {
    id: RSS3ID | RSS3ItemsID | RSS3ListID;
    "@version": 'rss3.io/version/v0.1.0-rc.0';
    date_created: string;
    date_updated: string;
    signature?: string;
}

// Entrance, RSS3 file
interface RSS3 extends RSS3Base {
    id: RSS3ID;

    profile: {
        name?: string;
        avatar?: ThirdPartyAddress;
        bio?: string;
        tags?: string[];
        signature?: string;
    };

    items: RSS3Item[];
    items_next?: RSS3ItemsID;

    links?: {
        type: string;
        tags?: string[];
        list: RSS3ID[];
        list_next?: RSS3ListID;
        signature?: string;
    }[];
    "@backlinks"?: {
        type: string;
        list: RSS3ID[];
        list_next?: RSS3ListID;
    }[];

    assets?: {
        type: string;
        tags?: string[];
        content: string;
    }[];
}

// RSS3Items file
interface RSS3Items extends RSS3Base {
    id: RSS3ItemsID;

    items: RSS3Item[];
    items_next?: RSS3ItemsID;
}

// RSS3List file
interface RSS3List extends RSS3Base {
    id: RSS3ListID;

    list: RSS3ID[] | RSS3ItemID[];
    list_next?: RSS3ListID;
}

interface RSS3Item {
    id: RSS3ItemID;
    authors?: RSS3ID[];
    title?: string;
    summary?: string;
    tags?: string[];
    date_published?: string;
    date_modified?: string;

    type?: string;
    upstream?: RSS3ItemID;

    contents?: {
        address: ThirdPartyAddress;
        mime_type: string;
        name?: string;
        tags?: string[];
        size_in_bytes?: string;
        duration_in_seconds?: string;
    }[];

    "@contexts"?: {
        type?: string;
        list: RSS3ItemID[];
        list_next?: RSS3ListID;
    }[];

    signature?: string;
}
```

### 5.2 示例

角色 `0xC8b960D09C0078c18Dcbe7eB9AB9d816BcCa8944` 发表了项目 `Hello World` 和一个评论。

```yaml
{
    "id": "0xC8b960D09C0078c18Dcbe7eB9AB9d816BcCa8944",
    "@version": "rss3.io/version/v0.1.0-rc.0",
    "date_created": "2009-05-01T00:00:00.000Z",
    "date_updated": "2021-05-08T16:56:35.529Z",

    "profile": {
        "name": "DIYgod",
        "avatar": ["dweb://diygod.jpg", "https://example.com/diygod.jpg"],
        "bio": "写代码是热爱，写到世界充满爱！",
        "tags": ["demo", "lovely", "technology"]
    },

    "items": [{
        "id": "0xC8b960D09C0078c18Dcbe7eB9AB9d816BcCa8944-item-1",
        "authors": ["0xC8b960D09C0078c18Dcbe7eB9AB9d816BcCa8944"],
        "summary": "Yes!!",
        "date_published": "2021-05-09T16:56:35.529Z",
        "date_modified": "2021-05-09T16:56:35.529Z",

        "type": "comment",
        "upstream": "0xC8b960D09C0078c18Dcbe7eB9AB9d816BcCa8944-item-0"
    }, {
        "id": "0xC8b960D09C0078c18Dcbe7eB9AB9d816BcCa8944-item-0",
        "authors": ["0xC8b960D09C0078c18Dcbe7eB9AB9d816BcCa8944"],
        "title": "Hello World",
        "summary": "Hello, this is the first item of RSS3.",
        "date_published": "2021-05-08T16:56:35.529Z",
        "date_modified": "2021-05-08T16:56:35.529Z",

        "contents": [{
            "file": ["dweb://never.html", "https://example.com/never.html"],
            "mime_type": "text/html"
        }, {
            "file": ["dweb://never.jpg"],
            "mime_type": "image/jpeg"
        }],

        "@contexts": [{
            "type": "comment",
            "list": ["0xC8b960D09C0078c18Dcbe7eB9AB9d816BcCa8944-item-1"]
        }, {
            "type": "like",
            "list": ["0xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"]
        }]
    }],
    "items_next": "0xC8b960D09C0078c18Dcbe7eB9AB9d816BcCa8944-items-0",

    "links": [{
        "type": "follow",
        "list": ["0xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"]
    }, {
        "type": "superfollow",
        "list": ["0xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"]
    }],
    "@backlinks": [{
        "type": "follow",
        "list": ["0xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"]
    }],

    "assets": [{
        "type": "some experience point",
        "content": "100"
    }]
}
```

### 5.3 字段

**5.3.1 概述**

**`@` 开头的字段**

- 完全由托管项目负责
- 托管项目可以随时修改
- 不允许角色修改

**`signature` 字段**

- 使用角色私钥签名
- 签名内容为字段所属对象的 Keccak-256 哈希值，不包以 `@` 字符开头的字段和 `signature` 字段本身
- 用于服务侧端和角色侧的对象集成验证
- 若服务侧可信，则字段可选
- 此字段随时使用，建议用在接口

**扩展**

在 RSS3 中使用自定义对象，名称必须以 `_` 字符开头，后跟字母。自定义对象可以在 RSS3 的任何地方使用。
**空内容**

强烈建议删除内容为空的字段，包括空字符串、空数组、空对象。

**5.3.2 RSS3Base**

每个文件共有属性

- `id`：当前文件的唯一标识和当前角色的公钥
- `@version`：当前文件的提案版本。像是 `rss3.io/version/v1.0.0` 
- `date_created`：RFC 3339 格式的创建日期
- `date_updated`：RFC 3339 格式的更新日期
- `signature`：参见**概述**

**5.3.3 RSS3**

RSS3 文件，表明一个人的身份

- `profile`：当前角色资料
    - `name`：当前角色名称
    - `avatar`：当前角色头像。指向相同的文件的一个或多个第三方地址
    - `bio`：当前角色描述
    - `tags`：当前角色标签
    - `signature`：参见**概述**
- `items`：当前角色发表的部分项目
- `items_next`：下一页 `items`. 查看**RSS3Items**获取更多信息
- `links`：此角色链接
    - `type`：链接类型，如关注、特别关注
    - `tags`：当前连接标签
    - `list`：此角色所属链接
    - `list_next`：下一页 link `list`. 查看 **RSS3List** 获取更多信息
    - `signature`：参见**概述**
- `@backlinks`：此角色所属反链，如 follow 类型意味着跟随者
    - `type`：Ibid
    - `list`：Ibid
    - `list_next`：Ibid
- `assets`：当前角色资产
    - `type`：资产类型，如 some experience point
    - `tags`：当前资产标签
    - `content`：当前资产内容

**5.3.4 RSS3Items**

RSS3Items 文件用于 RSS3 文件分页

- `id`：当前文件的唯一标识。类似`${RSS3ID}-items-${index}`
- `items`： 项目列表
- `items_next`：下一页 `items`

**5.3.5 RSS3List**

RSS3List 文件用于链接和内容分页

- `id`：当前文件的唯一标识。类似`${RSS3ID}-list-${field}-${type}`
- `list`：列表
- `list_next`：下一页 `list`

**5.3.6 RSS3Item**

表示由角色发布的内容或上下文

- `id`：当前项目的唯一 ID。类似 `${RSS3ID}-item-${index}`。
- `authors`：当前项目作者，`RSSOtherPersona` 列表
- `title`：当前项目标题
- `summary`：当前项目内容摘要
- `tags`：当前项目标签
- `date_published`：RFC 3339 格式的发布日期
- `date_modified`：RFC 3339 格式的修改日期
- `type`：非原始项目的项目类型，如 comment like
- `upstream`：非原始项目的上游
- `contents`：当前项目内容，可能包括不同类型的内容
    - `address`：内容地址。指向相同的文件的一个或多个第三方地址
    - `mime_type`：当前内容的 [MIME 类型](https://en.wikipedia.org/wiki/Media_type)
    - `name`：当前内容名称
    - `tags`：当前内容标签
    - `size_in_bytes`：当前内容大小
    - `duration_in_seconds`：当前内容的持续时间，以秒为单位。主要在音频和视频中使用
- `@contexts`：来自其他角色的互动性项目。
    - `type`：与上述类型相同
    - `list`：所属项目
    - `list_next`：下一页上下文列表 `list`. 查看 **RSS3List** 获取更多信息
- `signature`：参见**概述**
