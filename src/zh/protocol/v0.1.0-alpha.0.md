# RSS3 v0.1.0-alpha.0

**最新草案：**

- [https://github.com/NaturalSelectionLabs/RSS3](https://github.com/NaturalSelectionLabs/RSS3)

编者：

- DIYgod ([NaturalSelectionLabs](https://github.com/NaturalSelectionLabs))
- Joshua ([NaturalSelectionLabs](https://github.com/NaturalSelectionLabs))

**审稿：**

因为是首版，所以没有审稿。

**参与：**

- [GitHub](https://github.com/NaturalSelectionLabs/RSS3)
- [Telegram](https://bit.ly/3e6FZoV)
- [Discord](https://bit.ly/3aSYvPA)

## 摘要

RSS3 取自 RSS 精华，是为 Web 3.0 时代的内容和社交网络而设计的开放协议。

本文档介绍了 RSS3 文件相关接口。

## 文档状态

这项工作仍在进行中。本提案由 [NaturalSelectionLabs](https://github.com/NaturalSelectionLabs) 孵化。

首选 [GitHub Discussions](https://github.com/NaturalSelectionLabs/RSS3/discussions) 讨论本规范。

## 兼容性

这是 alpha 版本，不保证与后续版本兼容

## 概念

- 角色 - 一个用户，可以是个人，也可以是团体
- 编辑 - 有权修改此文件的人。
- 内容 - 一个项目的一种交互性内容
- 项目 - 一个由当前角色发布的原创项目（根项目）或一个来自其他角色的交互性项目（内容项目）。
- 链接 - 当前角色与其他角色的关系

## 接口

### TypeScript 接口

```tsx
type Address = string;

// Common attributes for each file
interface RSS3Base {
    id: Address;
    version: string;
    type: string;
    date_created: string;
    date_updated: string;
    editors?: {
        blocklist?: Address[]; // Link to RSS3Link files
        allowlist?: Address[]; // Link to RSS3Link files
    };
    items: any[];
    items_next?: Address; // T
}

// Entrance, RSS3Persona file
interface RSS3Persona extends RSS3Base {
    type: 'persona';
    editors: never;

    profile: {
        name?: string;
        avatar?: Address; // Link to a third party file
        bio?: string;
		tags?: string[];
    };

    links?: {
        id: Address; // Link to a RSS3Link file
        name: string;
        tags?: string[];
    }[];

    items: RSS3Item[];
    assets: {};
}

// RSS3Items file
interface RSS3Items extends RSS3Base {
    type: 'items';
    items: RSS3Item[];
}

// RSS3Link file
interface RSS3Link extends RSS3Base {
    type: 'relationship';
    items: RSS3OtherPersona[];
}

interface RSS3OtherPersona {
    id: Address; // Link to a RSS3Persona file
    verification?: string;
    name: string;
    avatar?: Address; // Link to a third party file
    bio?: string;
}

interface RSS3Item {
    id: string;
    authors?: RSS3OtherPersona[];
    title?: string;
    summary?: string;
    tags?: string[];
    date_published?: string;
    date_modified?: string;

    contents?: {
        id: Address; // Link to a third party file
        mime_type: string;
        name?: string;
        tags?: string[];
        size_in_bytes?: string;
        duration_in_seconds?: string;
    }[];

    contexts?: {
        id: Address; // Link to a RSS3Items file
        name?: string;
        tags?: string[];
    }[];
}
```

### 示例

RSS3Persona 文件：`persona:diygod` - `interface RSS3Persona`

角色 `DIYgod` 发布了 `Never` 项目

```json
{
    "id": "persona:diygod",
    "version": "rss3.io/version/v0.1.0-alpha.0",
    "type": "persona",
    "date_created": "2009-05-01T00:00:00.000Z",
    "date_updated": "2021-05-08T16:56:35.529Z",

    "profile": {
        "name": "DIYgod",
        "avatar": "dweb://diygod.jpg",
        "bio": "写代码是热爱，写到世界充满爱！",
        "tags": ["demo", "lovely", "technology"]
    },

    "links": [{
        "id": "link:diygod:followings",
        "name": "Followings"
    }, {
        "id": "link:diygod:followers",
        "name": "Followers"
    }, {
        "id": "link:diygod:blocklist",
        "name": "Blocklist"
    }],

    "items": [{
        "id": "item:diygod:never",
        "authors": ["persona:diygod"],
        "title": "Never",
        "summary": "Never stop dreaming.",
        "date_published": "2021-05-08T16:56:35.529Z",
        "date_modified": "2021-05-08T16:56:35.529Z",

        "contents": [{
            "id": "dweb://never.html",
            "mime_type": "text/html"
        }, {
            "id": "dweb://never.jpg",
            "mime_type": "image/jpeg"
        }],

        "contexts": [{
            "id": "items:diygod:never:comments",
            "name": "Comments"
        }, {
            "id": "items:diygod:never:likes",
            "name": "Likes"
        }]
    }],
    "items_next": "items:diygod:index2"
}
```

RSS3Link 文件：`link:diygod:followers` - `interface RSS3Link`

```json
{
    "id": "link:diygod:followers",
    "version": "rss3.io/version/v0.1.0-alpha.0",
    "type": "link",
    "date_created": "2009-05-01T00:00:00.000Z",
    "date_updated": "2021-05-08T16:56:35.529Z",
    "editors": {
        "blocklist": "link:diygod:blocklist"
    },

    "items": ["persona:joshua", "persona:atlas", "persona:tuzi", "persona:zuia"]
}
```

RSS3Items 文件：`items:diygod:never:comments` - `interface RSS3Items`

```json
{
    "id": "items:diygod:never:comments",
    "version": "rss3.io/version/v0.1.0-alpha.0",
    "type": "items",
    "date_created": "2009-05-01T00:00:00.000Z",
    "date_updated": "2021-05-08T16:56:35.529Z",
    "editors": {
        "allowlist": "link:diygod:followings"
    },

    "items": [{
        "id": "items:diygod:never:comments:0",
        "authors": [{
            "id": "persona:joshua",
            "verification": "xxxxx",
            "name": "Joshua",
            "avatar": "dweb://joshua.jpg"
        }],
        "title": "DIYgod is the best!",
        "date_published": "2021-05-08T16:56:35.529Z",
        "date_modified": "2021-05-08T16:56:35.529Z",

        "contents": [{
            "id": "dweb://best.jpg",
            "mime_type": "image/jpeg"
        }],

        "contexts": [{
            "id": "items:diygod:never:comments:0:sub-comments",
            "name": "Sub-Comments"
        }]
    }]
}
```

### 字段

**RSS3Base：**每个文件共有属性

- `id`：当前文件的唯一标识，用于权限验证。具体格式还需要进一步讨论
- `version`：当前文件的提案版本。像是 `rss3.io/version/v1.0.0`
- `type`：文件类型. 当前可选值有 `persona` `link` `items`
- `date_created`：RFC 3339 格式的创建日期
- `date_updated`：RFC 3339 格式的更新日期
- `editors`：除根角色外，有权限修改该文件的角色。默认值为 `{ allowlist: [] }`。此字段只能由根角色更改
    - `blocklist`：不允许修改的角色
    - `allowlist`：允许修改的角色。当此值不为空时，`blocklist` 无效
- `items`：列表。它的类型和意义取决于当前文件的类型。下面将分别解释。
- `items_next`：下一页 `items`

**RSS3Persona：**包括一个角色的文件

- `type`：必须为 `persona`
- `editors`：此字段不适用于此类文件。此文件只能由根角色更改
- `profile`：当前角色资料
    - `name`：当前角色名称
    - `avatar`：当前角色头像，指向第三方文件的链接。
    - `bio`：当前角色描述
    - `tags`：当前角色标签
- `links`：此角色关系，如关注者、跟随者、黑名单
    - `id`：它指向 RSS3Link 文件的 ID
    - `name`：关系名称
    - `tags`：不言而喻
- `items`：当前角色发布的部分 RSS3 项目，其数量上限仍需讨论
- `assets`：当前角色资产，其接口要求仍需讨论

**RSS3Items：**包含一堆 RSS3 项目的文件。它们可以是根项目或上下文项目

- `type`：必须为 `items`
- `items`： 根项目或上下文项目的列表

**RSS3Link：**RSS3 链接文件，表明一个角色的一种关系类型

- `type`：必须为 `link`
- `items`：`RSS3OtherPersona` 列表

**RSS3OtherPersona：**表示其他角色，在链接和项目中使用

- `id`：链接到 RSS3Persona 文件的 ID。
- `verification`：该角色签名的密钥。它用于表明该操作是由该角色批准的，类似于 git 的 GPG。它的实现仍需讨论
- `name`：该角色名称。
- `avatar`：此角色头像，指向第三方文件的链接。
- `bio`：此角色描述

**RSS3Item：**表示由角色发布的内容或上下文

- `id`：当前项目的唯一 ID
- `authors`：当前项目作者，`RSSOtherPersona` 列表
- `id`：当前项目的标题
- `summary`：当前项目的内容摘要
- `tags`：当前项目标签
- `date_published`：RFC 3339 格式的发布日期。
- `date_modified`：RFC 3339 格式的修改日期。
- `contents`：当前项目内容，可能包括不同类型的内容
    - `id`：实际内容，指向第三方文件的链接。
    - `mime_type`：当前内容的 [MIME 类型](https://en.wikipedia.org/wiki/Media_type)
    - `name`：当前内容名称
    - `tags`：当前内容标签
    - `size_in_bytes`：当前内容大小
    - `duration_in_seconds`：当前内容的持续时间，以秒为单位。主要在音频和视频中使用
- `contexts`：来自其他角色交互项目
    - `id`：链接到 RSS3Items 文件的 ID
    - `name`：当前上下文名称
    - `tags`：当前上下文标签

**扩展**

在 RSS3 中可用自定义对象。其名称必须以 _ 字符开头，后跟字母。自定义对象在 feed 的任何地方使用。
